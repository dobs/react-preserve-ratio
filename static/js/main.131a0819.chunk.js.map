{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["baseStyles","alignItems","border","display","justifyContent","margin","overflow","padding","PreserveRatio","children","maxHeight","maxScale","maxWidth","innerRef","useRef","outerRef","useState","width","height","innerRect","setInnerRect","outerRect","setOuterRect","scale","useMemo","dynamicScale","Math","Number","useEffect","observer","ResizeObserver","Array","entries","entry","ref","style","transform","ResizableContainer","resize","PropTypes","App","backgroundColor","ReactDOM","render","document","getElementById"],"mappings":"yZAQA,IAAMA,EAAa,CACjBC,WADiB,SAEjBC,OAFiB,OAGjBC,QAHiB,OAIjBC,eAJiB,eAKjBC,OALiB,EAMjBC,SANiB,SAOjBC,QAAS,G,SAGKC,K,IACdC,aACAC,cACAC,aACAC,aAEMC,EAAWC,iBAAjB,MACMC,EAAWD,iBAAjB,M,EAEkCE,mBAAe,CAACC,MAAD,EAAWC,OAAQ,IAA7DC,OAAWC,O,EACgBJ,mBAAe,CAACC,MAAD,EAAWC,OAAQ,IAA7DG,OAAWC,OAEZC,EAAQC,mBAAQ,WACpB,IAAIC,EAAeC,SACjBL,QAAkBF,EADDO,MAEjBL,SAAmBF,EAFrB,QAKA,OAAOO,WAELf,GAAYgB,OAFPD,WAGJhB,GAAaiB,OAAd,WAAkCR,EAH7BO,QAIJd,GAAYe,OAAb,WAAgCR,EAJlC,SAMC,CAACA,EAAWR,EAAUD,EAAWE,EAZpC,IAwCA,OA1BAgB,qBAAU,WACR,IAAMC,EAAW,IAAIC,gBAAe,YAC7BC,cAAL,IAIAC,WAAgB,SAAAC,GACd,OAAQA,EAAR,QACE,KAAKpB,EAAL,QACEO,EAAaa,EAAbb,aACA,MACF,KAAKL,EAAL,QACEO,EAAaW,EAAbX,oBASR,OAHAO,UAAiBhB,EAAjBgB,SACAA,UAAiBd,EAAjBc,SAEO,WACLA,kBAtBJD,IA2BE,yBACEM,IAAKnB,EACLoB,MAAK,GACHjB,OADG,OAEHD,MAAO,QAFJ,IAML,yBACEiB,IAAKrB,EACLsB,MAAO,CACLC,UAAW,SAAF,QAZjB,ICjEF,SAASC,EAAT,GAE+D,IAD7D5B,EAC4D,EAD5DA,SAEA,OACE,yBACE0B,MAAO,CACLjC,OAAQ,gCACRC,QAAS,QACTG,SAAU,SACVgC,OAAQ,OACRrB,MAAO,UAGRR,GDyEPD,YAA0B,CACxBC,SAAU8B,OADc,WAExB7B,UAFwB,SAGxBC,SAHwB,SAIxBC,SAAU2B,UCpEZ,IA4GeC,EA5GH,WACV,OACE,yBACEL,MAAO,CACL9B,OAAQ,QAGV,8DACA,6CACA,wIAIA,kBAACgC,EAAD,KACE,kBAAC7B,EAAD,KACE,yBACE2B,MAAO,CACLM,gBAAiB,UACjBtC,QAAS,OACTc,MAAO,QACPC,OAAQ,QACRjB,WAAY,SACZG,eAAgB,WAPpB,mBAeJ,mDACA,4CACgB,0CADhB,qBACuD,mCADvD,qDAIA,kBAACiC,EAAD,KACE,kBAAC7B,EAAD,CAAeG,SAAU,GACvB,yBACEwB,MAAO,CACLM,gBAAiB,UACjBtC,QAAS,OACTc,MAAO,QACPC,OAAQ,QACRjB,WAAY,SACZG,eAAgB,WAPpB,mBAcJ,4EACA,4BACE,4BACE,0CADF,oFAIA,4BACE,2CADF,mEAIA,4BACE,0CADF,mEAKF,2KAEwE,IACtE,2CAHF,QAG6B,4CAH7B,KAMA,sDACA,kKAIA,mLAKA,yBACE+B,MAAO,CACLjC,OAAQ,gCACRe,MAAO,OACPC,OAAQ,sBAGV,kBAACV,EAAD,KACE,yBACE2B,MAAO,CACLM,gBAAiB,UACjBtC,QAAS,OACTc,MAAO,QACPC,OAAQ,QACRjB,WAAY,SACZG,eAAgB,WAPpB,qBC/GVsC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.131a0819.chunk.js","sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from 'react';\nimport * as PropTypes from 'prop-types';\n\ninterface Rect {\n  height: number;\n  width: number;\n}\n\nconst baseStyles = {\n  alignItems: 'center',\n  border: 'none',\n  display: 'flex',\n  justifyContent: 'space-around',\n  margin: 0,\n  overflow: 'hidden',\n  padding: 0,\n};\n\nexport function PreserveRatio({\n  children,\n  maxHeight,\n  maxScale,\n  maxWidth,\n}: PropTypes.InferProps<typeof PreserveRatio.propTypes>) {\n  const innerRef = useRef(null);\n  const outerRef = useRef(null);\n\n  const [innerRect, setInnerRect] = useState<Rect>({width: 0, height: 0});\n  const [outerRect, setOuterRect] = useState<Rect>({width: 0, height: 0});\n\n  const scale = useMemo(() => {\n    let dynamicScale = Math.min(\n      outerRect.width / innerRect.width,\n      outerRect.height / innerRect.height\n    );\n\n    return Math.min(\n      dynamicScale,\n      maxScale || Number.MAX_VALUE,\n      (maxHeight || Number.MAX_VALUE) / innerRect.height,\n      (maxWidth || Number.MAX_VALUE)/ innerRect.width\n    );\n  }, [innerRect, maxScale, maxHeight, maxWidth, outerRect]);\n\n  useEffect(() => {\n    const observer = new ResizeObserver((entries: any) => {\n      if (!Array.isArray(entries)) {\n        return;\n      }\n\n      entries.forEach(entry => {\n        switch (entry.target) {\n          case innerRef.current:\n            setInnerRect(entry.contentRect);\n            break;\n          case outerRef.current:\n            setOuterRect(entry.contentRect);\n            break;\n        }\n      });\n    });\n\n    observer.observe(innerRef.current!);\n    observer.observe(outerRef.current!);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  return (\n    <div\n      ref={outerRef}\n      style={{\n        height: '100%',\n        width: '100%',\n        ...baseStyles,\n      }}\n    >\n      <div\n        ref={innerRef}\n        style={{\n          transform: `scale(${scale})`,\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\nPreserveRatio.propTypes = {\n  children: PropTypes.node.isRequired,\n  maxHeight: PropTypes.number,\n  maxScale: PropTypes.number,\n  maxWidth: PropTypes.number,\n};\n","import React from 'react'\nimport * as PropTypes from 'prop-types'\n\nimport { PreserveRatio } from 'react-preserve-ratio'\n\nfunction ResizableContainer({\n  children\n}: PropTypes.InferProps<typeof ResizableContainer.propTypes>) {\n  return (\n    <div\n      style={{\n        border: '1px dotted rgba(0, 0, 0, 0.2)',\n        display: 'block',\n        overflow: 'hidden',\n        resize: 'both',\n        width: '640px'\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nResizableContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst App = () => {\n  return (\n    <div\n      style={{\n        margin: '1em'\n      }}\n    >\n      <h1>Examples: react-preserve-scale</h1>\n      <h2>Basic Example</h2>\n      <p>\n        Try resizing the box below and notice how the inner box automatically\n        scales while maintaining its ratio.\n      </p>\n      <ResizableContainer>\n        <PreserveRatio>\n          <div\n            style={{\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              width: '320px',\n              height: '240px',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n\n      <h2>Constraints Example</h2>\n      <p>\n        This time the <code>maxScale</code> option is set to <code>2</code>,\n        limiting the inner box to 2x its initial scale.\n      </p>\n      <ResizableContainer>\n        <PreserveRatio maxScale={2}>\n          <div\n            style={{\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              width: '320px',\n              height: '240px',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n      <p>There are a few different constraint options:</p>\n      <ul>\n        <li>\n          <code>maxScale</code>: A number indicating the maximum scale for\n          content relative to their real size.\n        </li>\n        <li>\n          <code>maxHeight</code>: A number indicating the maximum height of\n          content, in pixels.\n        </li>\n        <li>\n          <code>maxWidth</code>: A number indicating the maximum width of\n          content, in pixels.\n        </li>\n      </ul>\n      <p>\n        Minimum constraints are more container-dependent an so aren't currently\n        covered by the component in favour of letting users specify their own{' '}\n        <code>min-width</code> and <code>min-height</code>.\n      </p>\n\n      <h2>Window Scaling Example</h2>\n      <p>\n        A typical use case is having content scale to fill the current window,\n        for example when displaying a slide as part of a slide show.\n      </p>\n      <p>\n        The box below should scale to match the window size. Try resizing your\n        window (or rotating your device) and see how the inner content scales to\n        fit.\n      </p>\n      <div\n        style={{\n          border: '1px dotted rgba(0, 0, 0, 0.2)',\n          width: '100%',\n          height: 'calc(100vh - 2em)'\n        }}\n      >\n        <PreserveRatio>\n          <div\n            style={{\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              width: '320px',\n              height: '240px',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}