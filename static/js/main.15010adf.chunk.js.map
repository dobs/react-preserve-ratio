{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["alignMap","left","center","right","valignMap","top","bottom","PreserveRatio","valign","innerRef","useRef","outerRef","useState","width","height","scale","useMemo","dynamicScale","Math","outerRect","innerRect","maxScale","Number","maxHeight","maxWidth","applyResize","entries","entry","setInnerRect","setOuterRect","useEffect","observer","ResizeObserver","Array","window","justifyContent","align","alignItems","ref","style","border","display","margin","overflow","padding","transform","transformOrigin","ResizableContainer","children","resize","PropTypes","safeMode","App","alignment","setAlignment","contentResizeRect","setContentResizeRect","backgroundColor","onClick","type","max","min","value","onChange","e","parseInt","target","transition","className","role","aria-label","href","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15010adf.chunk.js","sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from 'react';\nimport * as PropTypes from 'prop-types';\n\ninterface Rect {\n  height: number;\n  width: number;\n}\n\nconst alignMap = {\n  left: 'flex-start',\n  center: 'space-around',\n  right: 'flex-end',\n}\n\nconst valignMap = {\n  top: 'flex-start',\n  center: 'center',\n  bottom: 'flex-end',\n}\nexport function PreserveRatio({\n  align,\n  children,\n  maxHeight,\n  maxScale,\n  maxWidth,\n  safeMode,\n  valign,\n}: PropTypes.InferProps<typeof PreserveRatio.propTypes>) {\n  const innerRef = useRef(null);\n  const outerRef = useRef(null);\n\n  const [innerRect, setInnerRect] = useState<Rect>({width: 0, height: 0});\n  const [outerRect, setOuterRect] = useState<Rect>({width: 0, height: 0});\n\n  const scale = useMemo(() => {\n    let dynamicScale = Math.min(\n      outerRect.width / innerRect.width,\n      outerRect.height / innerRect.height\n    );\n\n    return Math.min(\n      dynamicScale,\n      maxScale || Number.MAX_VALUE,\n      (maxHeight || Number.MAX_VALUE) / innerRect.height,\n      (maxWidth || Number.MAX_VALUE)/ innerRect.width\n    );\n  }, [innerRect, maxScale, maxHeight, maxWidth, outerRect]);\n\n  const applyResize = (entries: any) => entries.forEach((entry: any) => {\n    switch (entry.target) {\n      case innerRef.current:\n        setInnerRect(entry.contentRect);\n        break;\n      case outerRef.current:\n        setOuterRect(entry.contentRect);\n        break;\n    }\n  });\n\n  useEffect(() => {\n    const observer = new ResizeObserver((entries: any) => {\n      if (!Array.isArray(entries)) {\n        return;\n      }\n\n      if (safeMode) {\n        window.requestAnimationFrame(() => {\n          applyResize(entries);\n        });\n      } else {\n        applyResize(entries);\n      }\n    });\n\n    observer.observe(innerRef.current!);\n    observer.observe(outerRef.current!);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [safeMode]);\n\n  const justifyContent = alignMap[align || ''] || 'space-around';\n  const alignItems = valignMap[valign || ''] || 'center';\n\n  return (\n    <div\n      ref={outerRef}\n      style={{\n        height: '100%',\n        width: '100%',\n        alignItems,\n        border: 'none',\n        display: 'flex',\n        justifyContent,\n        margin: 0,\n        overflow: 'hidden',\n        padding: 0,\n      }}\n    >\n      <div\n        ref={innerRef}\n        style={{\n          transform: `scale(${scale})`,\n          transformOrigin: `${valign || 'center'} ${align || 'center'}`,\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\nPreserveRatio.propTypes = {\n  align: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  maxHeight: PropTypes.number,\n  maxScale: PropTypes.number,\n  maxWidth: PropTypes.number,\n  safeMode: PropTypes.bool,\n  valign: PropTypes.string,\n};\n","import React, { useState } from 'react'\nimport * as PropTypes from 'prop-types'\n\nimport { PreserveRatio } from 'react-preserve-ratio'\n\ninterface Rect {\n  height: number\n  width: number\n}\n\ninterface Alignment {\n  align: string\n  valign: string\n}\n\nfunction ResizableContainer({\n  children\n}: PropTypes.InferProps<typeof ResizableContainer.propTypes>) {\n  return (\n    <div\n      style={{\n        border: '1px dotted rgba(0, 0, 0, 0.2)',\n        display: 'block',\n        height: '240px',\n        overflow: 'hidden',\n        resize: 'both',\n        width: '640px'\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nResizableContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst App = () => {\n  const [alignment, setAlignment] = useState<Alignment>({\n    align: 'center',\n    valign: 'center'\n  })\n  const [contentResizeRect, setContentResizeRect] = useState<Rect>({\n    width: 320,\n    height: 240\n  })\n\n  return (\n    <div\n      style={{\n        margin: '1em'\n      }}\n    >\n      <h1>Examples: react-preserve-scale</h1>\n      <h2>Basic Example</h2>\n      <p>\n        Try resizing the box below and notice how content automatically scales\n        while maintaining its ratio.\n      </p>\n      <ResizableContainer>\n        <PreserveRatio>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: '240px',\n              justifyContent: 'center',\n              width: '320px'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n\n      <h2>Constraints Example</h2>\n      <p>\n        This time the <code>maxScale</code> option is set to <code>2</code>,\n        limiting content to 2x its initial scale.\n      </p>\n      <ResizableContainer>\n        <PreserveRatio maxScale={2}>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: '240px',\n              justifyContent: 'center',\n              width: '320px'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n      <p>There are a few different constraint options:</p>\n      <ul>\n        <li>\n          <code>maxScale</code>: A number indicating the maximum scale for\n          content relative to their real size.\n        </li>\n        <li>\n          <code>maxHeight</code>: A number indicating the maximum height of\n          content, in pixels.\n        </li>\n        <li>\n          <code>maxWidth</code>: A number indicating the maximum width of\n          content, in pixels.\n        </li>\n      </ul>\n      <p>\n        Minimum constraints are more container-dependent an so aren't currently\n        covered by the component in favour of letting users specify their own{' '}\n        <code>min-width</code> and <code>min-height</code> on the container.\n      </p>\n\n      <h2>Content Resizing Example</h2>\n      <p>\n        Content is also automatically scaled when content dimensions change.\n      </p>\n      <p>\n        <button\n          onClick={() => setContentResizeRect({ width: 320, height: 240 })}\n        >\n          Default\n        </button>\n        <button\n          onClick={() => setContentResizeRect({ width: 480, height: 240 })}\n        >\n          Wide\n        </button>\n        <button\n          onClick={() => setContentResizeRect({ width: 240, height: 320 })}\n        >\n          Tall\n        </button>\n        |\n        <input\n          type='number'\n          max='999'\n          min='1'\n          value={contentResizeRect.width}\n          onChange={(e) =>\n            setContentResizeRect({\n              width: parseInt(e.target.value),\n              height: contentResizeRect.height\n            })\n          }\n        />\n        x\n        <input\n          type='number'\n          max='999'\n          min='1'\n          value={contentResizeRect.height}\n          onChange={(e) =>\n            setContentResizeRect({\n              width: contentResizeRect.width,\n              height: parseInt(e.target.value)\n            })\n          }\n        />\n      </p>\n      <ResizableContainer>\n        <PreserveRatio>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: `${contentResizeRect.height}px`,\n              justifyContent: 'center',\n              transition: 'width 200ms, height 200ms',\n              width: `${contentResizeRect.width}px`\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n\n      <h2>Alignment Example</h2>\n      <p>\n        Components also support horizontal and vertical alignment via{' '}\n        <code>align</code> and <code>valign</code> respectively.\n      </p>\n      <p>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'left', valign: 'top' })}\n        >\n          <span role='img' aria-label='top-left'>\n            ↖️\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'center', valign: 'top' })}\n        >\n          <span role='img' aria-label='top-center'>\n            ⬆️\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'right', valign: 'top' })}\n        >\n          <span role='img' aria-label='top-right'>\n            ↗️\n          </span>\n        </button>\n        <br />\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'left', valign: 'center' })}\n        >\n          <span role='img' aria-label='center-left'>\n            ⬅️\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'center', valign: 'center' })}\n        >\n          <span role='img' aria-label='center-center'>\n            ⏺\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'right', valign: 'center' })}\n        >\n          <span role='img' aria-label='center-right'>\n            ➡️\n          </span>\n        </button>\n        <br />\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'left', valign: 'bottom' })}\n        >\n          <span role='img' aria-label='bottom-left'>\n            ↙️\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'center', valign: 'bottom' })}\n        >\n          <span role='img' aria-label='bottom-center'>\n            ⬇️\n          </span>\n        </button>\n        <button\n          className='arrow-button'\n          onClick={() => setAlignment({ align: 'right', valign: 'bottom' })}\n        >\n          <span role='img' aria-label='bottom-right'>\n            ↘️\n          </span>\n        </button>\n      </p>\n\n      <ResizableContainer>\n        <PreserveRatio align={alignment.align} valign={alignment.valign}>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: `240px`,\n              justifyContent: 'center',\n              transition: 'width 200ms, height 200ms',\n              width: `320px`\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n\n      <h2>Safe Mode Example</h2>\n      <p>\n        If elements are resized too quickly it can result in non-user-impacting\n        errors. Where this could become a problem is if you're using a frontend\n        error tracking service it could create a lot of noise.\n      </p>\n      <p>\n        To help mitigate, there's a <code>safeMode</code> prop that introduces a\n        small amount of user-visible latency but in an attempt to reduce these\n        errors.\n      </p>\n      <p>\n        See{' '}\n        <a href='https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded'>\n          this StackOverflow thread\n        </a>{' '}\n        for more detail.\n      </p>\n      <ResizableContainer>\n        <PreserveRatio safeMode>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: '240px',\n              justifyContent: 'center',\n              width: '320px'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </ResizableContainer>\n\n      <h2>Window Scaling Example</h2>\n      <p>\n        A typical use case is having content scale to fill the current window,\n        for example when displaying a slide as part of a slide show.\n      </p>\n      <p>\n        The box below should scale to match the window size. Try resizing your\n        window (or rotating your device) and see how the inner content scales to\n        fit.\n      </p>\n      <div\n        style={{\n          border: '1px dotted rgba(0, 0, 0, 0.2)',\n          height: 'calc(100vh - 2em)',\n          width: '100%'\n        }}\n      >\n        <PreserveRatio>\n          <div\n            style={{\n              alignItems: 'center',\n              backgroundColor: '#ffffdd',\n              display: 'flex',\n              height: '240px',\n              justifyContent: 'center',\n              width: '320px'\n            }}\n          >\n            Hello, world!\n          </div>\n        </PreserveRatio>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}